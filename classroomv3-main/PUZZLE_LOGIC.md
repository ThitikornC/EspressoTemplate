# üß© ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Å‡∏°‡∏à‡∏¥‡πä‡∏Å‡∏ã‡∏≠‡∏ß‡πå

## üìã ‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö

### 1. ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Data Structure)

#### PuzzlePiece Interface
```typescript
interface PuzzlePiece {
  id: number              // ‡∏£‡∏´‡∏±‡∏™‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡∏≠‡∏á‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô (0-8 ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 3x3)
  correctPosition: number // ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
  imageData: string       // Base64 ‡∏Ç‡∏≠‡∏á‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡∏±‡∏î
  isPlaced: boolean       // ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ß‡πà‡∏≤‡∏ß‡∏≤‡∏á‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
}
```

#### State Variables
```typescript
pieces: PuzzlePiece[]           // ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (9 ‡∏ä‡∏¥‡πâ‡∏ô)
boardSlots: (number | null)[]   // ‡∏ä‡πà‡∏≠‡∏á‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô ‡πÄ‡∏Å‡πá‡∏ö piece.id ‡∏´‡∏£‡∏∑‡∏≠ null
showHint: boolean               // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
isComplete: boolean             // ‡πÄ‡∏Å‡∏°‡πÄ‡∏™‡∏£‡πá‡∏à‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
```

---

## üéØ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

### 1. **sliceImage()** - ‡πÅ‡∏ö‡πà‡∏á‡∏†‡∏≤‡∏û‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô

**‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:**
- ‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏û‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö
- ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á NxN (3x3, 4x4, 5x5)
- ‡πÉ‡∏ä‡πâ Canvas API ‡∏ï‡∏±‡∏î‡∏†‡∏≤‡∏û‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏•‡πá‡∏Å
- ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô
- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ initial state

**‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£:**
```
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á Canvas ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡∏¥‡πâ‡∏ô
2. drawImage() ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
3. toDataURL() ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô base64
4. ‡∏™‡∏£‡πâ‡∏≤‡∏á PuzzlePiece object ‡∏û‡∏£‡πâ‡∏≠‡∏° correctPosition
5. Shuffle array ‡∏î‡πâ‡∏ß‡∏¢ sort(random)
6. setState ‚Üí pieces, boardSlots
```

**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**
- `pieces`: ‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô 9 ‡∏ä‡∏¥‡πâ‡∏ô ‡∏ñ‡∏π‡∏Å‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏á, ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î isPlaced = false
- `boardSlots`: [null, null, null, null, null, null, null, null, null]

---

### 2. **placePiece(pieceId, slotIndex, fromSlotIndex?)** - ‡∏ß‡∏≤‡∏á‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô

**‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå:**
- `pieceId`: ‡∏£‡∏´‡∏±‡∏™‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ß‡∏≤‡∏á
- `slotIndex`: ‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ß‡∏≤‡∏á‡∏•‡∏á
- `fromSlotIndex`: (optional) ‡∏ä‡πà‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ñ‡πâ‡∏≤‡∏•‡∏≤‡∏Å‡∏à‡∏≤‡∏Å‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô

#### ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 1: ‡∏•‡∏≤‡∏Å‡∏à‡∏≤‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô (isPlaced = false)

**‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç:**
```typescript
if (!piece.isPlaced) {
  // ‡∏ä‡∏¥‡πâ‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤
}
```

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:**

1. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á**
   ```typescript
   const existingPieceId = boardSlots[slotIndex]
   ```

2. **‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏Å‡πà‡∏≤‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á ‚Üí ‡πÄ‡∏≠‡∏≤‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏Å‡πà‡∏≤‡∏≠‡∏≠‡∏Å**
   ```typescript
   if (existingPieceId !== null) {
     newPieces[index] = { ...piece, isPlaced: false }
     // ‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏Å‡πà‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô
   }
   ```

3. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á**
   ```typescript
   if (piece.correctPosition === slotIndex) {
     // ‡∏ß‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏ó‡∏µ‡πà!
     newPieces[index] = { ...piece, isPlaced: true }
     newSlots[slotIndex] = pieceId
     audioManager.playSuccess()
   } else {
     // ‡∏ß‡∏≤‡∏á‡∏ú‡∏¥‡∏î - ‡∏ä‡∏¥‡πâ‡∏ô‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏¥‡∏°
     audioManager.playClick()
   }
   ```

**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ:**

| ‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå | State Change | ‡πÄ‡∏™‡∏µ‡∏¢‡∏á |
|----------|-------------|------|
| ‡∏ß‡∏≤‡∏á‡∏ñ‡∏π‡∏Å + ‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á | piece.isPlaced‚Üítrue, slot=id | Success |
| ‡∏ß‡∏≤‡∏á‡∏ñ‡∏π‡∏Å + ‡∏°‡∏µ‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏Å‡πà‡∏≤ | ‡πÄ‡∏Å‡πà‡∏≤‚Üífalse, ‡πÉ‡∏´‡∏°‡πà‚Üítrue, slot=id | Success |
| ‡∏ß‡∏≤‡∏á‡∏ú‡∏¥‡∏î + ‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á | ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô | Click |
| ‡∏ß‡∏≤‡∏á‡∏ú‡∏¥‡∏î + ‡∏°‡∏µ‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏Å‡πà‡∏≤ | ‡πÄ‡∏Å‡πà‡∏≤‚Üífalse, slot=null | Click |

#### ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 2: ‡∏•‡∏≤‡∏Å‡∏à‡∏≤‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÑ‡∏õ‡∏≠‡∏µ‡∏Å‡∏ä‡πà‡∏≠‡∏á (swap)

**‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç:**
```typescript
else if (fromSlotIndex !== undefined && fromSlotIndex !== slotIndex) {
  // ‡∏ä‡∏¥‡πâ‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô
}
```

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:**

1. **‡∏™‡∏•‡∏±‡∏ö‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô**
   ```typescript
   targetPieceId = boardSlots[slotIndex]  // ‡∏ä‡∏¥‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á
   
   newSlots[fromSlotIndex] = targetPieceId  // ‡∏ß‡∏≤‡∏á‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏Å‡πà‡∏≤‡πÑ‡∏õ‡∏ä‡πà‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á
   newSlots[slotIndex] = pieceId            // ‡∏ß‡∏≤‡∏á‡∏ä‡∏¥‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏õ‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á
   ```

2. **‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï isPlaced status**
   ```typescript
   // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ä‡∏¥‡πâ‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
   piece1.isPlaced = (piece1.correctPosition === newPosition)
   piece2.isPlaced = (piece2.correctPosition === newPosition)
   ```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```
‡∏Å‡πà‡∏≠‡∏ô: [A, null, B, ...]
‡∏•‡∏≤‡∏Å A ‡πÑ‡∏õ‡∏ä‡πà‡∏≠‡∏á 2 (‡∏°‡∏µ B ‡∏≠‡∏¢‡∏π‡πà)
‡∏´‡∏•‡∏±‡∏á: [B, null, A, ...]
```

---

### 3. **removePiece(slotIndex)** - ‡∏ô‡∏≥‡∏ä‡∏¥‡πâ‡∏ô‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ä‡πà‡∏≠‡∏á

**‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:**
- ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô
- ‡∏ô‡∏≥‡∏ä‡∏¥‡πâ‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:**
```typescript
1. ‡∏î‡∏∂‡∏á pieceId ‡∏à‡∏≤‡∏Å boardSlots[slotIndex]
2. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ piece.isPlaced = false
3. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ boardSlots[slotIndex] = null
```

---

## üîç ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à

**‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç:**
```typescript
if (newPieces.every(p => p.isPlaced)) {
  setIsComplete(true)
}
```

**‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô:**
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ó‡∏∏‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏°‡∏µ `isPlaced = true`
- ‡∏ã‡∏∂‡πà‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡πà‡∏≤‡∏ó‡∏∏‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- ‡πÅ‡∏™‡∏î‡∏á modal ‡∏ä‡∏ô‡∏∞

---

## üé® Drag & Drop System

### BoardSlot Component

**‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£ Drop:**
```typescript
useDrop({
  accept: 'PUZZLE_PIECE',
  drop: (item) => {
    placePiece(item.pieceId, slotIndex, item.fromSlotIndex)
  },
  canDrop: (item) => {
    // ‡∏´‡πâ‡∏≤‡∏°‡∏ß‡∏≤‡∏á‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
    return piece?.id !== item.pieceId
  }
})
```

**‡πÄ‡∏õ‡πá‡∏ô Drag Source (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏ä‡∏¥‡πâ‡∏ô‡∏≠‡∏¢‡∏π‡πà):**
```typescript
useDrag({
  item: { 
    pieceId: piece.id, 
    fromSlotIndex: slotIndex 
  },
  canDrag: () => piece !== null
})
```

### DraggablePiece Component

**Drag Source ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô:**
```typescript
useDrag({
  item: { 
    pieceId: piece.id,
    correctPosition: piece.correctPosition
  }
})
```

---

## ‚öôÔ∏è State Management Principles

### ‚úÖ ‡∏ó‡∏≥ (Best Practices)

1. **Copy state ‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**
   ```typescript
   const newPieces = [...pieces]
   const newSlots = [...boardSlots]
   ```

2. **‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á**
   ```typescript
   newPieces[index] = { ...newPieces[index], isPlaced: true }
   ```

3. **‡πÉ‡∏ä‡πâ findIndex() ‡πÅ‡∏ó‡∏ô filter()**
   ```typescript
   const index = newPieces.findIndex(p => p.id === pieceId)
   ```

### ‚ùå ‡∏´‡πâ‡∏≤‡∏°‡∏ó‡∏≥

1. **‡∏´‡πâ‡∏≤‡∏° mutate state ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á**
   ```typescript
   // ‚ùå ‡∏ú‡∏¥‡∏î
   pieces[0].isPlaced = true
   
   // ‚úÖ ‡∏ñ‡∏π‡∏Å
   setPieces(prev => prev.map((p, i) => 
     i === 0 ? { ...p, isPlaced: true } : p
   ))
   ```

2. **‡∏´‡πâ‡∏≤‡∏° reset ‡∏ó‡∏±‡πâ‡∏á array**
   ```typescript
   // ‚ùå ‡∏ú‡∏¥‡∏î - ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ä‡∏¥‡πâ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏´‡∏≤‡∏¢
   setBoardSlots([null, null, null, ...])
   
   // ‚úÖ ‡∏ñ‡∏π‡∏Å - copy ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏Å‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ä‡πà‡∏≠‡∏á
   setBoardSlots(prev => {
     const newSlots = [...prev]
     newSlots[index] = value
     return newSlots
   })
   ```

3. **‡∏´‡πâ‡∏≤‡∏° splice() ‡∏´‡∏£‡∏∑‡∏≠ filter() ‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ß‡∏±‡∏á**
   ```typescript
   // ‚ùå ‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ä‡∏¥‡πâ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏´‡∏≤‡∏¢
   newPieces.splice(index, 1)
   ```

---

## üêõ Bug Prevention Checklist

- [ ] ‡∏ó‡∏∏‡∏Å‡∏Å‡∏≤‡∏£ setState ‡∏ï‡πâ‡∏≠‡∏á copy array ‡∏Å‡πà‡∏≠‡∏ô (`[...array]`)
- [ ] ‡πÉ‡∏ä‡πâ map() ‡πÅ‡∏ó‡∏ô forEach() ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö update
- [ ] ‡πÄ‡∏ä‡πá‡∏Ñ null/undefined ‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ piece
- [ ] ‡πÉ‡∏ä‡πâ findIndex() ‡∏´‡∏≤ index ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- [ ] ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï pieces ‡πÅ‡∏•‡∏∞ boardSlots ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡πÄ‡∏™‡∏°‡∏≠
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö isComplete ‡∏´‡∏•‡∏±‡∏á update state ‡πÄ‡∏™‡∏£‡πá‡∏à

---

## üìä State Flow Diagram

```
‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô
‚îÇ
‚îú‚îÄ ‡∏à‡∏≤‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô
‚îÇ  ‚îú‚îÄ ‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á ‚Üí ‡∏ß‡∏≤‡∏á‡∏ñ‡∏π‡∏Å/‡∏ú‡∏¥‡∏î
‚îÇ  ‚îî‚îÄ ‡∏ä‡πà‡∏≠‡∏á‡∏°‡∏µ‡∏ä‡∏¥‡πâ‡∏ô ‚Üí ‡πÄ‡∏≠‡∏≤‡πÄ‡∏Å‡πà‡∏≤‡∏≠‡∏≠‡∏Å ‚Üí ‡∏ß‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ñ‡∏π‡∏Å/‡∏ú‡∏¥‡∏î
‚îÇ
‚îî‚îÄ ‡∏à‡∏≤‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô
   ‚îî‚îÄ ‡∏™‡∏•‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á ‚Üí ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï isPlaced ‡∏ó‡∏±‡πâ‡∏á 2 ‡∏ä‡∏¥‡πâ‡∏ô
```

---

## üéØ ‡∏™‡∏£‡∏∏‡∏õ Core Logic

**Golden Rules:**

1. **One Piece, One Slot** - ‡∏ä‡πà‡∏≠‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏°‡∏µ‡πÑ‡∏î‡πâ‡πÅ‡∏Ñ‡πà‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
2. **No Lost Pieces** - ‡∏ä‡∏¥‡πâ‡∏ô‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡πÑ‡∏´‡∏ô ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡πÅ‡∏Ñ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô isPlaced
3. **Immutable Updates** - copy ‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏Å‡πâ‡πÄ‡∏™‡∏°‡∏≠
4. **Atomic Operations** - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï pieces + boardSlots ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
5. **Validation First** - ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡πà‡∏≠‡∏ô setState

---

## üß™ Testing Scenarios

### Test Case 1: ‡∏ß‡∏≤‡∏á‡∏ä‡∏¥‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á
- ‚úÖ ‡∏ä‡∏¥‡πâ‡∏ô‡∏ï‡∏¥‡∏î‡∏ñ‡πâ‡∏≤‡∏ñ‡∏π‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
- ‚úÖ ‡∏ä‡∏¥‡πâ‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ñ‡πâ‡∏≤‡∏ú‡∏¥‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á

### Test Case 2: ‡∏ß‡∏≤‡∏á‡∏ä‡∏¥‡πâ‡∏ô‡∏ó‡∏±‡∏ö‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏Å‡πà‡∏≤
- ‚úÖ ‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏Å‡πà‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà
- ‚úÖ ‡∏ä‡∏¥‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏ï‡∏¥‡∏î‡∏ñ‡πâ‡∏≤‡∏ñ‡∏π‡∏Å

### Test Case 3: ‡∏•‡∏≤‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÑ‡∏õ‡∏≠‡∏µ‡∏Å‡∏ä‡πà‡∏≠‡∏á
- ‚úÖ ‡∏ó‡∏±‡πâ‡∏á 2 ‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡∏•‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏Å‡∏±‡∏ô
- ‚úÖ isPlaced ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

### Test Case 4: ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ô‡∏≥‡∏ä‡∏¥‡πâ‡∏ô‡∏≠‡∏≠‡∏Å
- ‚úÖ ‡∏ä‡∏¥‡πâ‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà
- ‚úÖ ‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô null

### Test Case 5: ‡∏ä‡∏¥‡πâ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢
- ‚úÖ ‡∏ß‡∏≤‡∏á‡∏ä‡∏¥‡πâ‡∏ô‡∏ó‡∏µ‡πà 4 ‚Üí ‡∏ä‡∏¥‡πâ‡∏ô‡∏ó‡∏µ‡πà 3 ‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà
- ‚úÖ ‡∏ó‡∏∏‡∏Å state update ‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏ä‡∏¥‡πâ‡∏ô‡∏≠‡∏∑‡πà‡∏ô

---

**‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô:** 1.0  
**‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï:** 1 ‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏° 2025
